<md-card class="default-card">
  <h2>{{ title }} - {{ 'manage attachments' | translate }}</h2>
	<div class="bg-info info" *ngIf="!attachmentsResponseHandled">
    {{ 'loading your attachments' | translate }}
  </div>
	<div class="info" *ngIf="attachments.length == 0 && attachmentsResponseHandled">
    {{ 'no attachments' | translate }}
  </div>
  <md-list class="attachments-list" *ngIf="attachments.length > 0">
    <md-list-item *ngFor="let attachment of attachments">
      <h3 md-line>{{ attachment.name }}</h3>
      <p md-line>{{ attachment.description }}</p>
      <p md-line>
        {{ 'added at' | translate }} {{ attachment.createdAt | date: 'dd.MM.yyyy HH:mm:ss' }}
        {{ 'by user' | translate }} {{ attachment.user }}
        <span *ngIf="attachment.license != ''">- {{ attachment.license }}</span>
      </p>
      <div class="buttons">
        <button md-raised-button color="primary" (click)="downloadFile(attachment.id, attachment.topicId)">
          {{ 'download file' | translate }}
        </button>
        <button md-raised-button color="warn" (click)="deleteAttachment(attachment.id, attachment.topicId)">
          {{ 'delete attachment' | translate }}
        </button>
      </div>  
    </md-list-item>
  </md-list>
</md-card>

<md-card class="default-card">
  <h2>{{ 'add new attachment' | translate }}</h2>
  <md-card-content class="form">
    <div class="form-group">
      <md-input placeholder="{{ 'name' | translate }}" required [(ngModel)]="newAttachment.name">
        <md-hint [hidden]="newAttachment.name.length > 0" class="error-hint">{{'attachment name required' | translate}}</md-hint>
      </md-input>
    </div>
    <div class="form-group">
      <md-input placeholder="{{ 'description' | translate }}" [(ngModel)]="newAttachment.description">
      </md-input>
    </div>
    <div class="form-group">
      <md-input placeholder="{{ 'license' | translate }}" [(ngModel)]="newAttachment.license">
      </md-input>
    </div>
    <div class="form-group">
			<input #fileInput type="file" required accept="audio/*,image/*,video/*">
    </div>
    <div class="form-group right">
      <button md-raised-button color="primary" class="save md-primary" (click)="createAttachment(fileInput.files)">
        {{ 'save attachment' | translate }}
        <md-icon>save</md-icon>
      </button>
    </div>
  </md-card-content>
</md-card>
